name: Frontend CI/CD

on:
  push:
    branches: [ "master", "main" ]
  pull_request:
    branches: [ "master", "main" ]

jobs:
  validate-and-publish:
    name: Validate & Bundle
    runs-on: ubuntu-latest
    
    steps:
    - name: ğŸš€ Checkout Code
      uses: actions/checkout@v4
    
    - name: ğŸ” Validate Project Structure
      run: |
        echo "Checking core files..."
        [ -f index.html ] || (echo "âŒ index.html is missing!" && exit 1)
        [ -d css ] || (echo "âŒ css directory is missing!" && exit 1)
        [ -d js ] || (echo "âŒ js directory is missing!" && exit 1)
        echo "âœ… Structure is valid."
    
    - name: ğŸ“¦ Bundle Frontend
      run: |
        mkdir -p dist
        cp -r index.html css js pages assets data dist/
        echo "âœ… Bundle created in dist/"

    - name: ğŸ“¤ Upload Frontend Bundle
      uses: actions/upload-artifact@v4
      with:
        name: frontend-bundle
        path: dist/
        retention-days: 7
